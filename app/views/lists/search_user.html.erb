<h1>Add User</h1>

<%= label_tag "Users" %>
<ul>
  <% @list.users.each do |user| %>
    <li><%= user.username %></li>
  <% end %>
</ul>

<%= form_tag list_search_user_path, method: :get do %>
  <p>
    <%= text_field_tag :query %>
    <%= submit_tag "Search Username" %>
  </p>
<% end %>

<% if @users %>
  <table>
    <tbody>
      <% @users.each do |user| %>
        <% if !@list.users.include? user%>
          <tr>
            <td><%= user.username %></td>
            <td><%= button_to "Add User", list_add_user_path, method: :post, params: { user_id: user.id } %></td>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>
<% end %>